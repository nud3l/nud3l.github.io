---
layout: post
title:  "dinvest"
date:   2017-01-10
categories: blockchain
---
<h1> dInvest: Building a Distributed Autonomous Organization to Execute Profitable and Sustainable Investments </h1>
<p>As public reputation becomes one of the most important success factors beyond financial success <span class="citation">[1]</span><span class="citation">[2]</span>, these investment opportunity should ensure ethical decisions and keep sustainable investment as core of their strategy <span class="citation">[2]</span>. These long-term investment strategies based on criteria other than pure financial data are summarized under Value Investment <span class="citation">[3]</span>. Value investment is based on the assumption that the current price of an asset might not be the actual value of an asset (e.g. stocks and derivatives). Thus, criteria other than their current prices can be taken into account to calculate their value <span class="citation">[4]</span>. The value investing approach offers thereby methods to select potential investment based on social or sustainability criteria <span class="citation">[3]</span>. Furthermore, value investment includes diversification of the portfolio to achieve a desired level of risk <span class="citation">[3]</span>.</p>

<p>Written by <a href="https://se.linkedin.com/in/tharidu-fernando">Tharidu</a> and me.</p>

<p>With the development of blockchain technologies <span class="citation">[5]</span> and the Ethereum blockchain <span class="citation">[6]</span>, an autonomous and decentralized approach can be taken to create an investment opportunity. Users are able to invest directly with the cryptocurrency Ether into a company which exists in the Ethereum blockchain. Alternatively, they can invest with other cryptocurrencies (e.g. Bitcoin) or fiat currencies by utilizing currency exchanges. An autonomous organization build on Smart Contracts exists solely as code and can execute the details as specified in the contract <span class="citation">[6]</span>. As an example, The DAO<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> enabled users to act as venture capitalists by suggesting investments to other users. If a certain amount of investments was raised the contracts would be executed inside the blockchain. However, this approach failed as The DAO suffered security flaws, which led to a severe attack on its system.<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a> Furthermore, The DAO failed to give incentives to users proposing investments.<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a> Investments are voted for two weeks, while a vote can only be given by bounding a user’s capital into the vote. Thus, late voting and waiting for other’s resulted in available capital.</p>
<h2 id="sect:prblmstatement">Problem statement</h2>
<p>Certain investors want to invest their money in order to gain returns while being socially responsible and sustainable to e.g. achieve corporate sustainability objectives <span class="citation">[7]</span>. However, financial intermediaries, such as investment banks or hedge funds, do not always adhere to investors’ requirements as there might be conflicting interests <span class="citation">[4]</span>. Furthermore, the investment strategy applied by the financial intermediary can change through time and is highly influenced by social factors <span class="citation">[8]</span>. In addition to that, investors do not have complete transparency over the transactions <span class="citation">[4]</span>.</p>
<h2 id="sect:framework">Theoretical framework and literature study</h2>
<p>Our research is divided into three parts. First, the investment strategy that is applied to achieve our investment goals in terms of profitability and sustainability criteria. Second, the quantitative finance framework we are applying to simulate the trading of financial assets. Last, the implementation of the transparency and resilience as integral parts of the proposed solution.</p>
<h3 id="subsubsec:valueinvest">Value Investment</h3>
<p>Financial investments can take different forms. While it might be feasible for skilled individuals to develop their own investment strategy, we decided to create a hedge fund as an investment opportunity. A hedge fund offers multiple individuals to acquire a part of the pooled investment, which itself invests in publicly traded financial assets. It is measured according to its absolute returns <span class="citation">[9]</span>. A manager administrates the investment of the hedge fund and takes the decisions to buy, sell, or hold financial assets to balance absolute returns and risks. In this implementation, suggestion of investments, decision to execute these, and the actual execution are automated using autonomous agents and Smart Contracts, which will be detailed in subsection [subsubsec:SmartContracts].</p>
<p>A hedge fund may apply different strategies. Hedge funds can follow one specific strategy, mix established strategies, or create a fund out of hedge funds to diversify <span class="citation">[10]</span>. The majority of hedge fund strategies try to optimize the absolute return and risk based on financial indicators of the assets to be invested in. An overview of the different strategies that are currently applied by different hedge funds is provided by HFR, Inc in <span class="citation">[11]</span>. Measuring the performance of hedge funds as well as specific influence factors is a wide research area. Liang has shown on historical data that average hedge fund returns are related positively to incentive fees, fund assets, and the lockup period<span class="citation">[12]</span>. Fung and Hsieh benchmark hedge funds based on their risk utilizing an arbitrage pricing theory, with dynamic risk-factor coefficients <span class="citation">[13]</span>. Slavutskaya shows that benchmarking on hedge funds often suffers from over-parametrising as hedge funds typically operate shorter than three years and thus introduces a new performance measurement <span class="citation">[14]</span>. Sun et al. discuss the influence on the hedge fund strategy towards its performance and introduce a measurement of the funds strategy distinctiveness <span class="citation">[15]</span>. Cumming et al. present historical data from 48 countries and evaluate the regulatory influence on the performance of hedge funds <span class="citation">[16]</span>.</p>
<p>A common standard in literature and the investment practice to compare hedge funds is based on their absolute returns, Sharpe ratio, alpha and beta as well as a comparison to benchmarks <span class="citation">[10]</span>. These measurements are also used in this paper to determine the performance of the distributed autonomous hedge fund and will be explained later on in section [sec:method]. As part of this research, we are specifically looking into value investment strategies, because of their orientation towards long-term and sustainable investments <span class="citation">[3]</span>.</p>
<p>Ethical investment is often referred to as socially responsible investment (SRI). Thereby, the traditional risk and return criteria are enhanced with social or environmental aspects. Generally, there are three different strategies applied to achieve this form of investment: exclusion, activism and dialogue or engagement <span class="citation">[8]</span>. Exclusion describes the act of omitting certain investments due to environmental or social concerns. Activism includes actively executing rights as an investor (e.g. as a shareholder in a company) to influence organizations. Dialogue or engagement describes the act of communicating and seeking common gaols as a group (i.e. as investors or shareholders) <span class="citation">[8]</span>.</p>
<h3 id="quantitative-finance-framework">Quantitative Finance Framework</h3>
<p>To implement an investment strategy, certain rule sets are developed and applied. Quantitative finance “translates” economic models into the mathematical world and allows to apply for example stochastic analysis over shares or calculate the value of derivatives <span class="citation">[17]</span>. Quantitative finance techniques express investment strategies in mathematical formulas and thus enables a translation into an algorithm <span class="citation">[17]</span>. Trading with financial assets can be done through banks or intermediaries. As part of this project, we will not trade with fiat currencies, thus we need to simulate such a bank or intermediary. As our time and scope is limited, we were looking if there are existing frameworks, which offer us (1) a simulation environment to test our algorithms without using actual money, (2) realistic conditions of the trading market, such as fees and process delays, (3) is able to trade shares and derivatives based on historical data to test our algorithm, (4) provide little delay (lower than 10 minutes) in trading current assets, and (5) is able to be controlled using a programming language (such as Python, Java, or Scala). We evaluated several solutions including MB Trading<a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a>, Quantiacs<a href="#fn5" class="footnoteRef" id="fnref5"><sup>5</sup></a> and Quantopian.<a href="#fn6" class="footnoteRef" id="fnref6"><sup>6</sup></a> We decided to use the open source implementation of the Quantopian framework zipline<a href="#fn7" class="footnoteRef" id="fnref7"><sup>7</sup></a> as it fulfilled our aforementioned criteria best. It offers us to write our own investment algorithms, test the algorithms on 15 years of financial data, simulates fees and other conditions, as well as offering a one minute trading delay. Moreover, it provides a framework to automate the calculation of hedge fund performance measurements including absolute returns, Sharpe ratio, alpha, and beta ratio.</p>
<h3 id="subsubsec:SmartContracts">Smart Contracts</h3>
<p>The technical solution can be implemented in traditional client server architecture, where all the records are stored in several trusted nodes only. This is similar to most of the financial applications that are running in banks and other financial institutions <span class="citation">[16]</span>. In this architecture the records are not tamper-proof or completely transparent because we have to trust one or several central entities.</p>
<p>As an alternative, a blockchain based technical architecture can be used. This provides a trustless and tamper-proof distributed ledger in a shared environment. It uses thousands of computer nodes worldwide to replicate this “database of transactions” that enables a <em>single global truth</em> about a transaction. The first blockchain based financial application was the cryptocurrency called BitCoin, which was introduced in 2009 <span class="citation">[18]</span>. These can be seen as the first generation of blockchain applications. After that, applications like NameCoin and ColoredCoin were released which are building upon existing blockchains and adding extra functionality to store data inside the blocks. However, these blockchains are limited to the single purpose of the design without any flexibility.</p>
<p>The second generation of blockchains address those missing functionalities by providing users with Turing-complete programming languages. Thereby, instead of limited to store data, applications can execute code to make any decision. Thus, it can be a generic programmable blockchain. Ethereum is a decentralized platform which offers this functionality through its own blockchain and cryptocurrency called Ether. The Ethereum Virtual Machine (EVM) is responsible for handling the states and computations of the protocol. This can execute code of arbitrary algorithmic complexity, thus it is “Turing-complete” <span class="citation">[6]</span>.</p>
<p>Using Ethereum, developers can implement “Smart contracts”, which are lines of code in an account that execute automatically when transactions are sent to that account. This functionality can be exploited to express business logic that is executed in the Ethereum platform and because of its trustless nature, the outcome is final and agreed by all participants <span class="citation">[6]</span>. We are using the concept of smart contracts in order to act as the agreement between investors and investment agents, whereas the rule set specific to investment stored in the contract is the “terms of agreement” of the investment. Due to the tamper-proof and transparency nature of the blockchain, we can achieve fully-functioning hedge fund using Ethereum’s smart contract concept. This smart contract will function as the decentralised application (DApp) with minimal human intervention. The criteria and the code stored in the DApp will decide whether to approve or reject the investment strategies suggested, and distributed profits to the investors.</p>
<h2 id="sect:questions">Research questions, hypotheses</h2>
<p>The purpose is to evaluate the possibility and success of an distributed autonomous hedge fund in the Ethereum blockchain (hereafter referred to as dInvest) compared to traditional benchmark indexes while being socially responsible and sustainable. Our hypothesis is the following:</p>
<p>A distributed autonomous hedge fund implemented in a blockchain based on smart contracts is (1) able to be more profitable than benchmark indexes and (2) investments follow sustainability criteria that are transparent to the investors.</p>
<h1 id="sec:method">Methods</h1>
<p>The project will use the experimental and empirical method to implement, simulate, and observe the proposed solution in the Ethereum Ropsten network. First, the performance of the hedge fund will be measured quantitatively based on historical data from the past six years and compared to a benchmark index. The benchmark index used in this paper is the commonly used S&amp;P500<a href="#fn8" class="footnoteRef" id="fnref8"><sup>8</sup></a> <span class="citation">[12]</span>, an index covering the 500 largest US equities. This measurement is based on the aforementioned criteria:</p>
<ul>
<li><p>Returns: The return of the fund is influenced by how well the strategy is able to determine assets that are increasing (for long buys) or decreasing (for short buys) in value over time. This is measurement is used to determine the overall profit and loss as well as the mean and outliers per time interval (daily/week/month).</p></li>
<li><p>Sharpe: With the Sharpe ratio we can determine the return in respect to the risk involved. The Sharpe ratio is calculated by dividing the sum of the asset return and a benchmark return by the standard deviation of the asset return. The higher the Sharpe ratio, the higher the return with the same risk or the lower the risk with same return. This is used to determine the overall Sharpe ratio, mean Sharpe ratio per time interval (week/month) and outliers.</p></li>
<li><p>Alpha: The alpha value expresses the risk-adjusted performance of the fund in comparison to a benchmark. An alpha of zero means exact performance as the benchmark. A positive value indicates outperforming the benchmark and a negative value represents falling behind the benchmark. The alpha is utilized to express the historical return on investment compared to its Sharpe ratio (risk adjusted expected return).</p></li>
<li><p>Beta: The beta value shows the volatility of the fund in comparison to a benchmark. The beta value baseline is one and represents the same volatility as the benchmark. A value below one indicates a lower volatility and consequently a value above one a higher volatility than the benchmark. This is used to measure the historical volatility in comparison to the S&amp;P500 index.</p></li>
</ul>
<p>Second, the transparency and sustainability of investments are analysed utilizing qualitative methods. Transparency of our system will be evaluated by qualitatively analysing the steps of an investment from a user’s perspective. Furthermore, we quantitatively analyse the operational cost of our Smart Contract system. From the three presented methods of socially responsible investment in section [subsubsec:valueinvest], exclusion is the simplest one to implement in an autonomous system. Activism and dialogue require advanced autonomous features of our Smart Contract and agents to interact with third parties, hence we exclude these forms of socially responsible investment from our research scope. We will qualitatively analyse how we implement exclusion criteria in our system and point out potential weak spots and limitations of our approach.</p>
<h1 id="sec:system">System Design and Implementation</h1>
<p>A distributed application will be developed in the Ropsten network of the Ethereum platform to facilitate smart contracts between investors and the autonomous organization. This represents the hedge fund smart contract as further specified in [subsec:hedgefund]. In addition to that, two autonomous agents will be implemented where investment opportunities will be identified as detailed in [subsec:investbot] and the orders are executed as elaborated in [subsec:buybot]. A generalised ruleset will be designed and implemented in the application for adding “socially-responsible” behaviour for probable investments. This ruleset will be based on researching value investment strategies.</p>
<p>The code for the agents and the smart contract is available in our GitHub repository <span class="citation">[19]</span>.</p>
<h2 id="overview">Overview</h2>
<p>We present an overview of the proposed architecture in figure [fig:architecture]. Users are represented in the Ropsten network of the Ethereum blockchain as addresses. Users can hold certain amounts of test Ether, which they can invest into dInvest. The investment will contain an amount of Ether and a time period defined by the user. The details of the investment will be defined in a smart contract between the user and dInvest. Selecting stocks for different investment amounts and time periods is comparably computation intensive and will require the application of investment algorithms. Thus, their executing is costly in the blockchain and will therefore be executed by an autonomous agent (invest agent) outside of the blockchain. The required information will be passed on to dInvest on demand and therefore keeping the operational cost to a minimum.</p>
<p>The invest agent will suggest investment strategies to the hedge fund according to the current Ether value. The hedge fund will decide to approve or reject the offer based on the criteria of users’ investments. Only if the criteria is fulfilled, the Ether will be transferred to the buy agent and make the investment. The invest agent will transfer the investment return to the hedge fund where the profit/loss will be divided to investors according to their investment value.</p>
<p>The distributed application is developed using the <em>Solidity</em> <span class="citation">[20]</span> language that can compile code that is designed to run in the EVM. Solidity provides programming constructs to send and receive Ether as well as to interact with the Ethereum blockchain. In order to make development easier the <em>Truffle</em> <span class="citation">[21]</span> framework was used. Truffle provides a development and test environment for smart contract development. In addition to that, testrpc <span class="citation">[22]</span> was used to mock an Ethereum network locally, which makes development and testing much faster.</p>
<div class="figure">
<img src="{{ site.url }}/images/blog/dinvest/contract_functions_1.png" alt="Hedge contract activities including Hedge Contract, Invest Agent, Buy Agent and users" style="width:100.0%"/>
<p class="caption">Hedge contract activities including Hedge Contract, Invest Agent, Buy Agent and users<span data-label="fig:architecture"></span></p>
</div>
<h2 id="subsec:hedgefund">Hedge Contract (HC)</h2>
<p>dInvest is composed of one smart contract that is responsible for making investments, verifying investment criteria and distribution of returns. The contract exposes public functions to create new investments and for withdrawal which will act as main functions of a hedge fund. Users of the hedge fund are identified by their Ethereum address which is equivalent for the public key. Suggestion of investment strategies and strategy execution are done in different agents that also have Ethereum addresses. These agents are set by the contract creator only.</p>
<p>When a user is creating an investment it is possible to specify a list of industry sectors identified by a two digit number based on the Standard Industrial Classification codes <span class="citation">[23]</span>. These sectors will be identified as a black list when making the investments. Therefore user have the ability control the sectors which the hedge fund will invest on. We decided against using stock market acronym of companies, because this will incur a significant amount of gas in the Ethereum network, thus not sustainable when number of investors are growing. Also, we would need to track each acronym and respectively users would need to know each of the companies to exclude them. Thus, it is simpler to utilize the standardised mapping of SIC codes <span class="citation">[24]</span>.</p>
<h2 id="subsec:investbot">Invest Agent</h2>
<p>The invest agent is implemented using <em>zipline</em>, which is a Python library to allow back-testing and trading of financial assets <span class="citation">[25]</span>. Zipline allows to integrate trading algorithms with stock market data from Quandl, which includes all sorts of financial assets including e.g. stocks, derivatives and raw materials <span class="citation">[26]</span>. We simulated our trading algorithm based on these financial data with the zipline back-testing functionality.</p>
<p>As investment algorithm we decided to use a simple value investment strategy as we are interested in long term profits and sustainable portfolios. Benjamin Graham coined the term value investment and has developed a number of strategies as well as criteria to select stocks to trade <span class="citation">[27]</span>. We implement the following trading algorithm inspired by Graham: (1) select shares and derivatives of companies with a market capitalization of minimum 100 million dollars; (2) Determine the SIC code of each asset <span class="citation">[23]</span> and exclude the ones contained in the blacklist from the hedge fund; (3) Based on the sectors of the companies find the two sectors with the price of assets per earning ratio (PE ratio); (4) Invest every month in the the all the companies listed in the two sectors, whereby we hold assets if their are included in the next month suggestion, sell if they are excluded, and buy if they are included.</p>
<p>Zipline does not include the full functionality and data to realise the investment algorithm and integration with the blockchain. The market capitalization data, sector codes, and PE ratio are not accessible from zipline. Thus, we extended the library to include the fundamentals data from Sharadar<span class="citation">[24]</span> and map the name of assets to their respective performance indicators. This can be used as an automated way of integrating CSV based data exports from Quandl to zipline. Furthermore, we needed to integrate the hedge fund functions from our smart contract to our trading algorithm. We implemented a general ContractHandler class to allow communication and data exchange with Ethereum Smart Contracts using the <em>web3.py</em> library.<a href="#fn9" class="footnoteRef" id="fnref9"><sup>9</sup></a></p>
<h2 id="subsec:buybot">Buy Agent</h2>
<p>The buy agent simply executes the strategy as defined by the invest agent, if the hedge fund confirms the strategy. The hedge fund decides on a daily basis if the strategy should continue by transferring the amount of Ether to trade with to the buy agent’s account (which is an Ethereum address). If the strategy is not confirmed, the buy agent will just hold the positions for that day in our simulation. After the end of a trading day the buy agent transfers the Ether back to the hedge fund.</p>
<h1 id="sec:results">Results and Analysis</h1>
<p>As mentioned in section [sec:method], the DApp is hosted in Ropsten testnet of Ethereum where users and agents are simulated. This section covers the simulations and analysis of dInvest based on the implementation in the Ropsten testnet. In the following subsections the results of our solution is described and analysed in regard to sustainability, implementation and performance.</p>
<h2 id="sustainability">Sustainability</h2>
<p>To integrate sustainability into dInvest we utilized a value investment strategy as well as an exclusion of companies based on their industry. To ensure blacklisting of companies a user investing in the hedge fund can include a sector code for industries she is not interested in (e.g. defence industry). Before each trading day, the invest agent call the <em>blackListCompanies()</em> function of the hedge fund to get the current list of sectors to exclude. When selecting financial assets for investment theses sectors are then excluded from the list in the trading algorithm. This form of sustainability is a quite basic implementation of socially responsible investment. It is simple to implement and offers a transparent overview to the user. However, it has certain limitations: (1) When more complex financial products are part of the investment (e.g. other funds or options) the sector code will be of a financial category. This means a fund specialising in the defence industry, might still be selected by the algorithm as the asset itself (i.e. the fund) indicates a financial sector. (2) The implementation does not promote sustainable companies or efforts as it only excludes certain sectors. Under the assumption that a certain company contributes towards sustainable development, a fully socially responsible investment strategy might support this company by investing in it and thereby supporting its business. (3) Assessing financial assets according to their social responsibility and sustainability is cumbersome due to the lack of independent standards<span class="citation">[7]</span> and complexity of the products<span class="citation">[4]</span>. Therefore, a more complex and thorough socially responsible investment strategy needs to solve these issues first.</p>
<h2 id="hedge-fund-performance">Hedge fund performance</h2>
<p>To analyse the performance of the investment algorithm the absolute returns, Sharpe, alpha, and beta for the period of January 1, 2009 to November 15, 2016 is compared. The investment algorithm uses the Quandl financial data i.e. opening and closing prices of specific assets during that period<span class="citation">[26]</span>. As a starting value of the fund we decided to use an equivalent of 10 million USD. This amount enables us to spread our portfolio among different assets, but will not affect the overall financial market as the volume is too low.</p>
<p>We executed the algorithm multiple times. First, we did not exclude any sectors and second, we used an exclusion list based on sectors. We excluded the defence, beer and alcohol, tobacco, and coal industry based on ESG criteria and common practices <span class="citation">[28]</span>. Figure [fig:return1] presents the returns achieved by the unrestricted algorithm, the algorithm with single excluded sectors, and the benchmark return. These returns show that unrestricted and single excluded algorithms have overall a higher profit than the benchmark. Figure [fig:return2] displays a combination of two excluded sectors and the benchmark return, while figure [fig:return3] elaborates on the combinations of three and all four sectors excluded.</p>
<p><img src="{{ site.url }}/images/blog/dinvest/investment_return_single.png" title="fig:" alt="Absolute returns over time for the investment algorithm with and without exclusion of sectors in comparison to S&amp;P500 benchmark index from January 1, 2009 to November 15, 2016." style="width:100.0%"/></p>
<p><img src="{{ site.url }}/images/blog/dinvest/investment_return_double.png" title="fig:" alt="Absolute returns over time for the investment algorithm with and without exclusion of sectors in comparison to S&amp;P500 benchmark index from January 1, 2009 to November 15, 2016." style="width:100.0%"/></p>
<p><img src="{{ site.url }}/images/blog/dinvest/investment_return_triple.png" title="fig:" alt="Absolute returns over time for the investment algorithm with and without exclusion of sectors in comparison to S&amp;P500 benchmark index from January 1, 2009 to November 15, 2016." style="width:100.0%"/></p>
<p>We notice that single or combinations of exclusions constantly perform better than the benchmark until beginning of 2012. Then the unrestricted algorithm as well as the single exclusion of defence and alcohol exclusion and also the combination of tobacco and coal, defence and alcohol, defence and coal exclusions drop until they recover in 2014. The other single and combination algorithms do not show this drop, but also have a strong increase in returns in 2014. Then all variations show high volatility. The drop in 2012 in the unrestricted algorithm is caused by three of the sectors it is investing in. When tobacco is restricted, there is no strong drop in 2012. However, if not also in combination defence and/or coal is restricted the algorithm selects either of the two industries instead and another drop occurs. In figure [fig:return3] these exclusions are combined and no significant drop occurs, however the volatility remains. Further, we analyse the algorithm excluding all four industries.</p>
<p><img src="{{ site.url }}/images/blog/dinvest/sharpe_exclusion.png" title="fig:" alt="Selected performance metrics of the hedge fund from January 1, 2009 to November 15, 2016." style="width:100.0%"/></p>
<p><img src="{{ site.url }}/images/blog/dinvest/alpha_beta_exclusion.png" title="fig:" alt="Selected performance metrics of the hedge fund from January 1, 2009 to November 15, 2016." style="width:100.0%"/></p>
<p>To understand the volatility in 2015 and 2016 of the algorithm, we take a closer look at the Sharpe ratio as well as the alpha and beta in figure [fig:metrics]. In both figures the first two months are characterized by large jumps, caused by a lack of data due to the beginning of the testing. In figure [fig:sfig2] we see that the Sharpe ratio stays relatively constant over time, even when the algorithm returns are volatile. However, the benchmark return shows us that the overall market has also relatively high drops in mid 2015 and beginning of 2016. At these points the algorithm is invested in around 220 assets and behaves very similar to the overall market. The beta value in figure [fig:sfig3] shows the volatility of the fund in comparison to a benchmark. The beta value baseline is one and represents the same volatility as the benchmark. A value above one, as in our case, indicates a higher volatility than the benchmark. The alpha value expresses the performance of the fund in comparison to a benchmark. The alpha above zero indicates that we are constantly outperforming the benchmark.</p>
<h2 id="hedge-fund-operational-costs-in-ethereum">Hedge fund operational costs in Ethereum</h2>
<p>This section will investigate how much gas it will cost to the platform to keep running the hedge fund. Currently, all experiments are run locally instead of the actual Ethereum blockchain for convenience. However, since EVM is a Turing machine, the number of computations will be the same as the real blockchain, the figures computed is comparable with the public blockchain.</p>
<p>In a single run of the experiment,</p>
<ol style="list-style-type: decimal">
<li><p>All users will make the investment to hedge fund (including the criteria)</p></li>
<li><p>Invest agent will make a dummy strategy with a return of 20% of the hedge fund value that does not violate any criteria</p></li>
<li><p>Execution engine will accept the strategy and receive ether from hedge fund to execute it</p></li>
<li><p>Execution engine will send the returned investment to the hedge fund with financial indicators</p></li>
<li><p>All users will withdraw the full return of the investment</p></li>
</ol>
<h3 id="consumption-of-gas-w.r.t.-number-of-users-in-the-hedge-fund" class="unnumbered">Consumption of gas w.r.t. number of users in the hedge fund</h3>
<p>In this experiment, investment, user criteria (blacklist of companies) are fixed and the number of users will be changed 1 to 20. Thus, 20 runs of the hedge fund will be executed locally.</p>
<div class="figure">
<img src="{{ site.url }}/images/blog/dinvest/users.png" alt="Gas consumption against number of users" style="width:100.0%" />
<p class="caption">Gas consumption against number of users<span data-label="fig:gas_users"></span></p>
</div>
<h3 id="consumption-of-gas-w.r.t.-number-of-criteria-in-the-hedge-fund" class="unnumbered">Consumption of gas w.r.t. number of criteria in the hedge fund</h3>
<p>In this experiment, investment, number of users are fixed at 10 and the number of criteria will be changed 1 to 10. Therefore, a minimum of 1 blacklisted company and a maximum of 10 blacklisted companies will be used for the users’ investments.</p>
<div class="figure">
<img src="{{ site.url }}/images/blog/dinvest/blacklist.png" alt="Gas consumption against user criteria" style="width:100.0%" />
<p class="caption">Gas consumption against user criteria<span data-label="fig:gas_blacklist"></span></p>
</div>
<h3 id="analysis-of-gas-cost" class="unnumbered">Analysis of gas cost</h3>
<p>According to figures [fig:gas_users] and [fig:gas_blacklist] we can conclude that amount of gas consumed for a single execution of hedge fund has linear relationship with no of users and user criteria. The unit price of gas in the Ropsten network is 1 Wei. However in the public Ethereum blockchain 1 gas costs 27306724366 Wei which is 0.000000027306724366 Ether (about 0.00000022 in USD - 1 Ether costs 8.73 USD as of 16/11/28).</p>
<p>According to current gas consumption in the hedge fund per investment (current worst case scenarios and after adjusting to correct gas prices), 20 users (with 3 user criteria) - 0.25 Ether (2.22 USD) and 10 criteria (with 10 users) - 0.13 Ether (1.48 USD).</p>
<h1 id="sec:discussion">Discussion</h1>
<p>This section is divided into the sustainability of our solution according to the 17 UN sustainable development goals<span class="citation">[29]</span>, the evaluation of our implementation and the performance of our hedge fund.</p>
<h2 id="sustainability-1">Sustainability</h2>
<p>Based on the 17 Sustainable Development Goals<span class="citation">[29]</span>, we have evaluated our project and the solution presented in this paper. Hereafter, we present the seven goals that are affected by our project.</p>
<p><strong>Goal 1: End poverty in all its forms everywhere:</strong> Ethereum is accessible to anyone with a computer and dInvest offers investment opportunities for everyone without the need to open up a bank account. Creation of an Ethereum wallet to store ether is free, however access to a computer is required.</p>
<p><strong>Goal 5: Achieve gender equality and empower all women and girls:</strong> dInvest uses anonymous Ethereum address as only means to store user data and is thus independent of gender, age or any other personal data.</p>
<p><strong>Goal 8: Promote inclusive and sustainable economic growth, employment and decent work for all :</strong> dInvest is open to everyone and is aimed at sustainable investment utilizing value investment strategies. It is fully transparent to its users as well as open source. Developers can utilize the work to develop their own hedge funds or to improve the current solution. However, autonomous hedge funds or in general decentralized autonomous organizations can led to a loss of work as it might automate processes prior executed by humans. For our project these include people regularly employed by hedge funds.</p>
<p><strong>Goal 9: Build resilient infrastructure, promote sustainable industrialization and foster innovation:</strong> dInvest is build upon smart contracts in a blockchain, which have build in resilience against powerful single entities or a combination thereof as well as fault tolerance by distribution of data over many machines. Yet, there are attack vectors to harm the infrastructure or single organizations in the blockchain<span class="citation">[30]</span><span class="citation">[31]</span>.</p>
<p><strong>Goal 10: Reduce inequality within and among countries:</strong> Investing in a hedge fund is currently limited to wealthy individuals and mostly available in highly developed countries. With dInvest we remove these barriers. Ethereum is available on Android, which makes it easily accessible to nearly every person with an Android based mobile device<a href="#fn10" class="footnoteRef" id="fnref10"><sup>10</sup></a>.</p>
<p><strong>Goal 12: Ensure sustainable consumption and production patterns:</strong> dInvest encourages sustainable investment over high risks and high return investments. Our social responsible investment excludes companies that do not adhere to sustainability criteria. Nonetheless, the implementation of sustainability is quite basic as only certain industries are excluded.</p>
<p><strong>Goal 17: Revitalize the global partnership for sustainable development:</strong> dInvest’s data is publicly available in the Ethereum blockchain. Thus, statistics on investments can be deducted for governments and organizations.</p>
<h2 id="smart-contracts">Smart Contracts</h2>
<p>dInvest utilises the Ethereum smart contract platform to perform majority of tasks related to a hedge fund automatically as defined by code. However the code is published open for everybody to see as bytecode, thus other competing financial institutions can exploit it and predict how the hedge fund make decisions. This will affect the profitability of the hedge fund and thus affect the sustainability of it.</p>
<p>In addition to that, currently only one instance of invest agent has been developed, therefore strategies devised will be very similar, which can be a disadvantage for profitability. This can be rectified by implementing more invest agents with different algorithms, hence investors would not restricted to one and free to utilise different strategies.</p>
<p>Furthermore, in the process of developing the dInvest platform, we understood that because of the immutability of Ethereum has a negative aspect as well. Even though the written smart contract is checked and tested repeatedly, we have found several critical bugs. Due to the immutability nature in Ethereum, it is not possible to update the existing smart contract and a new contract should be release with each bug fix. This procedure is quite challenging and time consuming, hence it would be a future work to either develop a formalized verification method as presented in <span class="citation">[32]</span> or to have some way of updating code in the blockchain.</p>
<p>Finally, blockchain based technologies such as Bitcoin and Ethereum are not environment friendly because of the current consensus algorithm. Ethereum is depending on a proof of work approach, where nodes solve difficult mathematical problems in order reach the required consensus. This takes considerable amount of processing power which is not energy efficient, because of the high electricity consumption that is need. For example, Bitcoin’s proof of work is calculated to consume electricity compared to Ireland’s electricity consumption <span class="citation">[33]</span>. Thus, it has a high environmental impact in the long run.</p>
<p>In order to remediate this environmental impact, Ethereum is planning to migrate to a proof of stake approach where the money owned by users will decide the stake and the capability to produce new blocks that is needed to reach a consensus <span class="citation">[34]</span>. So it will not be dependent on the energy inefficient calculations that are needed in proof of work approach.</p>
<h2 id="performance">Performance</h2>
<p>The investment algorithm performs overall better than the benchmark, however as figure [fig:returns] shows there are some volatile behaviours as we progress. In figure [fig:timemetrics] we put the return, Sharpe, alpha and beta metric into a time perspective. In each of the figures we show the mean, median and quartiles. For Sharpe, alpha and beta they stay relatively constant over time. The quartiles for the returns however get significantly more narrow when looking at the monthly compared to the daily returns.</p>
<div class="figure">
<img src="{{ site.url }}/images/blog/dinvest/time_based_measurements.png" alt="Returns: Mean, quartiles and outliers in monthly, weekly and daily perspective. Sharpe: Mean, quartiles and outliers in monthly, weekly and daily perspective. Alpha: Mean, quartiles and outliers in monthly, weekly and daily perspective. Beta: Mean, quartiles and outliers in monthly, weekly and daily perspective." style="width:100.0%" />
<p class="caption"><strong>Returns:</strong> Mean, quartiles and outliers in monthly, weekly and daily perspective. <strong>Sharpe:</strong> Mean, quartiles and outliers in monthly, weekly and daily perspective. <strong>Alpha:</strong> Mean, quartiles and outliers in monthly, weekly and daily perspective. <strong>Beta:</strong> Mean, quartiles and outliers in monthly, weekly and daily perspective.<span data-label="fig:timemetrics"></span></p>
</div>
<p>The performance of our investment is based on a quite simple value investment algorithm and offers room for improvement. The volatility is very high once we distribute the available funds over too many different assets. The number of assets in the dataset are increasing over-time as well as the available fundamentals data. This results in a selection of more assets overall, as they potentially fulfill the criteria. We noticed that we start with one sector and one asset in January 2009 and linearly increase the number of assets until end of 2013. Until then there is a minimum of 1% investment in each asset. After that the asset distribution drops below 1% per asset, which results in a comparably high transaction cost per asset as these are fixed. Furthermore, we are invested in several assets and hence depend more on the overall market movement.</p>
<h1 id="sec:conclusion">Conclusion</h1>
<p>With dInvest we have shown that basic socially responsible investment based on value investment and exclusion is possible to implement. Furthermore, our experiments show that exclusion can be used as a simple form of socially responsible measurement. On our experiments we have shown that for the time period of January 1, 2009 to November 15, 2016 and exclusion of alcohol, tobacco, coal, and defence sectors does not negatively affect the performance of the algorithm overall. However, we see that based on the sectors certain down and upward movements are possible. As we have conducted backtesting of the algorithm, we cannot conclude that the algorithm will always be profitable in the future. Moreover, we cannot conclude that exclusion stabilizes the algorithm. As long as the selected assets are stable, the algorithm will be stable. As the exclusion is based on ESG criteria and deliberately not on financial criteria, exclusion does not help in stabilizing the returns. As a future work, a learning based approach could be used to optimize the selection of financial assets.</p>
<p>In our experiments we have further shown that financial intermediaries can be avoided to a certain extent by using smart contracts and autonomous agents. In practice the investment agent or multiple agents can be implemented by persons having certain interests and thus including this bias in their algorithms. The end-user would hereby not recognize this bias. The algorithm’s sensitivity towards socially responsible investment criteria can be enhanced by including transparent ratings of financial products. Thereby, the algorithm can be implemented with a bias towards especially sustainable, environmental friendly or equality seeking companies and their assets. Furthermore, an investment algorithm based on machine learning techniques could be used to ensure independence from human bias in development of the algorithms.</p>
<p>Moreover, transparency can be achieved within the blockchain, but remains difficult with connected agents outside the blockchain. We include the blacklist in the investment algorithm and verify the strategy through the smart contract, but trust between smart contracts and external agents or systems remains an open problem. This also includes effective verification of exclusion of industry sectors (i.e. proofing input/outputs between smart contract and external agents).</p>
<div class="footnotes">
<ol>
<li id="fn1"><p>“The DAO - Home.” 2016. 7 Sep. 2016 &lt;https://daohub.org&gt;<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>“Understanding The DAO Attack - CoinDesk.” 2016. 7 Sep. 2016 &lt;http://www.coindesk.com/understanding-dao-hack-journalists&gt;<a href="#fnref2">↩</a></p></li>
<li id="fn3"><p>“The Bizarre Fallout of Ethereum’s Epic Fail - Fortune.” 2016. 7 Sep. 2016 &lt;http://fortune.com/2016/09/04/ethereum-fall-out&gt;<a href="#fnref3">↩</a></p></li>
<li id="fn4"><p>https://www.mbtrading.com/<a href="#fnref4">↩</a></p></li>
<li id="fn5"><p>https://quantiacs.com/<a href="#fnref5">↩</a></p></li>
<li id="fn6"><p>https://www.quantopian.com/<a href="#fnref6">↩</a></p></li>
<li id="fn7"><p>https://github.com/quantopian/zipline<a href="#fnref7">↩</a></p></li>
<li id="fn8"><p>S&amp;P 500: http://us.spindices.com/indices/equity/sp-500<a href="#fnref8">↩</a></p></li>
<li id="fn9"><p>Web3.py: https://github.com/pipermerriam/web3.py<a href="#fnref9">↩</a></p></li>
<li id="fn10"><p>https://ethereum-android.com/<a href="#fnref10">↩</a></p></li>
</ol>
</div>

<h1 id="references" class="unnumbered">References</h1>
<div id="refs" class="references">
<div id="ref-HawkBlockchain">
<p>[1] A. E. Kosba, A. Miller, E. Shi, Z. Wen, and C. Papamanthou, “Hawk: The blockchain model of cryptography and privacy-preserving smart contracts.” <em>IACR Cryptology ePrint Archive</em>, vol. 2015, p. 675, 2015.</p>
</div>
<div id="ref-CorporateReputation">
<p>[2] S. Raithel and M. Schwaiger, “The effects of corporate reputation perceptions of the general public on shareholder value.” <em>Strategic Management Journal</em>, vol. 36.6, pp. 945–956, 2015.</p>
</div>
<div id="ref-greenwald2004value">
<p>[3] B. Greenwald, J. Kahn, P. Sonkin, and M. van Biema, <em>Value investing: From graham to buffett and beyond</em>. John Wiley &amp; Sons, 2004.</p>
</div>
<div id="ref-InvestmentBankReputation">
<p>[4] Z. Chen, A. D. Morrison, and W. J. Wilhelm, “Investment bank reputation and ‘star’ cultures.” <em>Review of Corporate Finance Studies</em>, vol. 2.2, pp. 129–153, 2014.</p>
</div>
<div id="ref-AnalysisBitcoin">
<p>[5] F. Reid and M. Harrigan, “An analysis of anonymity in the bitcoin system,” <em>CoRR</em>, vol. abs/1107.4524, 2011.</p>
</div>
<div id="ref-Ethereum">
<p>[6] V. Buterin, “A next-generation smart contract and decentralized application platform,” 2013. [Online]. Available: <a href="https://github.com/ethereum/wiki/wiki/White-Paper" class="uri">https://github.com/ethereum/wiki/wiki/White-Paper</a>. [Accessed: 09-Oct-2016].</p>
</div>
<div id="ref-SociallyResponsibleInvesting">
<p>[7] L. Abramson and D. Chung, “Socially responsible investing: Viable for value investors?” <em>The Journal of Investing</em>, vol. 9.3, pp. 73–80, 2000.</p>
</div>
<div id="ref-SociallyResponsibleInvestment">
<p>[8] R. Sparkes, “Socially responsible investment,” in <em>Handbook of finance</em>, John Wiley &amp; Sons, Inc., 2008.</p>
</div>
<div id="ref-HedgeFundDefinition">
<p>[9] D. Harper, “Hedge funds hunt for upside, regardless of the market,” 2016. [Online]. Available: <a href="http://www.investopedia.com/articles/03/112603.asp" class="uri">http://www.investopedia.com/articles/03/112603.asp</a>. [Accessed: 09-Oct-2016].</p>
</div>
<div id="ref-HedgeFundStrategies">
<p>[10] M. Agarwal, “Hedge fund strategies,” in <em>The future of hedge fund investing</em>, John Wiley &amp; Sons, Inc., 2009, pp. 45–55.</p>
</div>
<div id="ref-HedgeFundStrategiesOverview">
<p>[11] H. F. Research, “HFR hedge fund strategy classification system,” 2016. [Online]. Available: <a href="https://www.hedgefundresearch.com/hfr-hedge-fund-strategy-classification-system" class="uri">https://www.hedgefundresearch.com/hfr-hedge-fund-strategy-classification-system</a>. [Accessed: 09-Oct-2016].</p>
</div>
<div id="ref-liang1999performance">
<p>[12] B. Liang, “On the performance of hedge funds,” <em>Financial Analysts Journal</em>, vol. 55, no. 4, pp. 72–85, 1999.</p>
</div>
<div id="ref-fung2004hedge">
<p>[13] W. Fung and D. A. Hsieh, “Hedge fund benchmarks: A risk-based approach,” <em>Financial Analysts Journal</em>, vol. 60, no. 5, pp. 65–80, 2004.</p>
</div>
<div id="ref-slavutskaya2013short">
<p>[14] A. Slavutskaya, “Short-term hedge fund performance,” <em>Journal of Banking &amp; Finance</em>, vol. 37, no. 11, pp. 4404–4431, 2013.</p>
</div>
<div id="ref-sun2012road">
<p>[15] Z. Sun, A. Wang, and L. Zheng, “The road less traveled: Strategy distinctiveness and hedge fund performance,” <em>Review of Financial Studies</em>, vol. 25, no. 1, pp. 96–143, 2012.</p>
</div>
<div id="ref-cumming2012regulatory">
<p>[16] D. Cumming, N. Dai, L. H. Haß, and D. Schweizer, “Regulatory induced performance persistence: Evidence from hedge funds,” <em>Journal of Corporate Finance</em>, vol. 18, no. 5, pp. 1005–1022, 2012.</p>
</div>
<div id="ref-wilmott2013paul">
<p>[17] P. Wilmott, <em>Paul wilmott on quantitative finance</em>. John Wiley &amp; Sons, 2013.</p>
</div>
<div id="ref-nakamoto2008bitcoin">
<p>[18] S. Nakamoto, “Bitcoin: A peer-to-peer electronic cash system.” 2008.</p>
</div>
<div id="ref-SourceCode">
<p>[19] T. Fernando and D. Harz, “DInvest: Repository for distributed autonomous investment banking,” 2017. [Online]. Available: <a href="https://github.com/nud3l/Dinvest" class="uri">https://github.com/nud3l/Dinvest</a>. [Accessed: 04-Jan-2017].</p>
</div>
<div id="ref-solidity">
<p>[20] Ethereum, “Solidity: Trustless, decentralised, smart contracts for ethereum,” 2016. [Online]. Available: <a href="https://github.com/ethereum/solidity" class="uri">https://github.com/ethereum/solidity</a>. [Accessed: 27-Nov-2016].</p>
</div>
<div id="ref-truffle">
<p>[21] ConsenSys, “Truffle: A development framework for ethereum,” 2016. [Online]. Available: <a href="https://github.com/Consensys/truffle" class="uri">https://github.com/Consensys/truffle</a>. [Accessed: 27-Nov-2016].</p>
</div>
<div id="ref-testrpc">
<p>[22] EthereumJS, “Testrpc: Fast ethereum rpc client for testing and development,” 2016. [Online]. Available: <a href="https://github.com/ethereumjs/testrpc" class="uri">https://github.com/ethereumjs/testrpc</a>. [Accessed: 27-Nov-2016].</p>
</div>
<div id="ref-SIC">
<p>[23] U. S. D. of Labor, “SIC division structure,” 2016. [Online]. Available: <a href="https://www.osha.gov/pls/imis/sic_manual.html" class="uri">https://www.osha.gov/pls/imis/sic_manual.html</a>. [Accessed: 27-Nov-2016].</p>
</div>
<div id="ref-SICTicker">
<p>[24] Sharadar, “SIC division structure,” 2016. [Online]. Available: <a href="https://www.quandl.com/data/SF0-Free-US-Fundamentals-Data/documentation/about" class="uri">https://www.quandl.com/data/SF0-Free-US-Fundamentals-Data/documentation/about</a>. [Accessed: 27-Nov-2016].</p>
</div>
<div id="ref-zipline">
<p>[25] Quantopian, “Zipline: Pythonic algorithmic trading library,” 2016. [Online]. Available: <a href="https://github.com/quantopian/zipline/" class="uri">https://github.com/quantopian/zipline/</a>. [Accessed: 27-Nov-2016].</p>
</div>
<div id="ref-Quandl">
<p>[26] Quandl, “Quandl: Financial database,” 2016. [Online]. Available: <a href="https://www.quandl.com/browse?idx=database-browser" class="uri">https://www.quandl.com/browse?idx=database-browser</a>. [Accessed: 27-Nov-2016].</p>
</div>
<div id="ref-graham">
<p>[27] B. Graham and D. Dodd, <em>Security analysis: Sixth edition</em>. McGraw-Hill Education, 2008.</p>
</div>
<div id="ref-ESGCriteria">
<p>[28] J. R. Evans and D. Peiris, “The relationship between environmental social governance factors and stock returns,” <em>UNSW Australian School of Business Research Paper No. 2010ACTL02</em>, 2010.</p>
</div>
<div id="ref-UnitedNations">
<p>[29] United Nations, “Sustainable Development Goals.”.</p>
</div>
<div id="ref-TheDAOHack">
<p>[30] P. Daian, “Analysis of the dao exploit,” 2016. [Online]. Available: <a href="http://hackingdistributed.com/2016/06/18/analysis-of-the-dao-exploit/" class="uri">http://hackingdistributed.com/2016/06/18/analysis-of-the-dao-exploit/</a>. [Accessed: 09-Oct-2016].</p>
</div>
<div id="ref-Christin2014">
<p>[31] N. Christin and R. Safavi-Naini, “Majority Is Not Enough: Bitcoin Mining Is Vulnerable Ittay,” <em>Lecture Notes in Computer Science (including subseries Lecture Notes in Artificial Intelligence and Lecture Notes in Bioinformatics)</em>, vol. 8437, pp. 436–454, 2014.</p>
</div>
<div id="ref-FormalVerification">
<p>[32] K. Bhargavan, A. Delignat-Lavaud, C. Fournet, A. Gollamudi, G. Gonthier, N. Kobeissi, N. Kulatova, A. Rastogi, T. Sibut-Pinote, N. Swamy, and S. Zanella-Béguelin, “Formal verification of smart contracts: Short paper,” in <em>Proceedings of the 2016 acm workshop on programming languages and analysis for security</em>, 2016, pp. 91–96.</p>
</div>
<div id="ref-o2013bitcoin">
<p>[33] K. J. O’Dwyer and D. Malone, “Bitcoin mining and its energy footprint,” in <em>Irish signals &amp; systems conference 2014 and 2014 china-ireland international conference on information and communications technologies (issc 2014/ciict 2014). 25th iet</em>, 2013, pp. 280–285.</p>
</div>
<div id="ref-proofOfStake">
<p>[34] Ethereum, “Ethereum - Proof of Stake FAQ.”.</p>
</div>
</div>
